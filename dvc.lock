schema: '2.0'
stages:
  preprocess:
    cmd: poetry run preprocess-images -d data/raw -o data/prepared
    deps:
    - path: data/raw
      hash: md5
      md5: 0b79f55f0ec10d41e3de9f1da478bac9.dir
      size: 368859965
      nfiles: 24339
    - path: intel_image_classification/preprocess_dataset.py
      hash: md5
      md5: e6d93c1614259f227de1881d5ff33458
      size: 2234
    outs:
    - path: data/prepared/test
      hash: md5
      md5: de1844a58ad4f556eda23a2b858ab681.dir
      size: 10299352
      nfiles: 3000
    - path: data/prepared/train
      hash: md5
      md5: ba69f02e032ecb767866174c09bf8515.dir
      size: 48280766
      nfiles: 14034
  train:
    cmd: poetry run train --dataset-path data/prepared/train -o model.pkl
    deps:
    - path: data/prepared/train/
      hash: md5
      md5: ba69f02e032ecb767866174c09bf8515.dir
      size: 48280766
      nfiles: 14034
    - path: intel_image_classification/train.py
      hash: md5
      md5: b9f73b3c7c4cb87e4a71c365843a80d9
      size: 3792
    params:
      params.yaml:
        train:
          batch_size: 2
          validation_split: 0.2
          epochs: 20
    outs:
    - path: model.pkl
      hash: md5
      md5: 7ee1b75f2a48c598ee863912e09a161d
      size: 20837690
  evaluate:
    cmd: poetry run evaluate --model-path model.pkl --metrics-save-path metrics.json
    deps:
    - path: data/prepared/test
      hash: md5
      md5: de1844a58ad4f556eda23a2b858ab681.dir
      size: 10299352
      nfiles: 3000
    - path: intel_image_classification/evaluate.py
      hash: md5
      md5: 025e1d3511ba282d18cd2d4ca136fa4c
      size: 1045
    - path: model.pkl
      hash: md5
      md5: 7ee1b75f2a48c598ee863912e09a161d
      size: 20837690
    outs:
    - path: metrics.json
      hash: md5
      md5: 947787b4d89bb35a56b09e6d1e944047
      size: 60
