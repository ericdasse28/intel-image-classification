schema: '2.0'
stages:
  preprocess:
    cmd: poetry run preprocess-images -d data/raw -o data/prepared
    deps:
    - path: data/raw
      hash: md5
      md5: 0b79f55f0ec10d41e3de9f1da478bac9.dir
      size: 368859965
      nfiles: 24339
    - path: intel_image_classification/preprocess_dataset.py
      hash: md5
      md5: e6d93c1614259f227de1881d5ff33458
      size: 2234
    outs:
    - path: data/prepared/test
      hash: md5
      md5: de1844a58ad4f556eda23a2b858ab681.dir
      size: 10299352
      nfiles: 3000
    - path: data/prepared/train
      hash: md5
      md5: ba69f02e032ecb767866174c09bf8515.dir
      size: 48280766
      nfiles: 14034
  train:
    cmd: poetry run train --dataset-path data/prepared/train -o model.pkl
    deps:
    - path: data/prepared/train/
      hash: md5
      md5: ba69f02e032ecb767866174c09bf8515.dir
      size: 48280766
      nfiles: 14034
    - path: intel_image_classification/train.py
      hash: md5
      md5: 0588a9267dbc76ba2fff0025c325a848
      size: 4008
    params:
      params.yaml:
        train:
          batch_size: 2
          validation_split: 0.2
          epochs: 20
    outs:
    - path: dvclive
      hash: md5
      md5: 423c68892733674ab8f58c0fe156cd3e.dir
      size: 1981
      nfiles: 5
    - path: model.pkl
      hash: md5
      md5: 56cb2cd0e3b40f8d1f73f785a2f30e38
      size: 20837690
  evaluate:
    cmd: poetry run evaluate --model-path model.pkl
    deps:
    - path: data/prepared/test
      hash: md5
      md5: de1844a58ad4f556eda23a2b858ab681.dir
      size: 10299352
      nfiles: 3000
    - path: dvclive
      hash: md5
      md5: ff5dbb18d84a027db0bca8638f4ca631.dir
      size: 100
      nfiles: 1
    - path: intel_image_classification/evaluate.py
      hash: md5
      md5: f3b88bc96879aa2602d045dd68bea27f
      size: 880
    - path: model.pkl
      hash: md5
      md5: 56cb2cd0e3b40f8d1f73f785a2f30e38
      size: 20837690
