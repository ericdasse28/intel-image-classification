schema: '2.0'
stages:
  preprocess:
    cmd: poetry run preprocess-images -d data/raw -o data/prepared
    deps:
    - path: data/raw
      hash: md5
      md5: 0b79f55f0ec10d41e3de9f1da478bac9.dir
      size: 368859965
      nfiles: 24339
    - path: intel_image_classification/preprocess_dataset.py
      hash: md5
      md5: e6d93c1614259f227de1881d5ff33458
      size: 2234
    outs:
    - path: data/prepared/test
      hash: md5
      md5: de1844a58ad4f556eda23a2b858ab681.dir
      size: 10299352
      nfiles: 3000
    - path: data/prepared/train
      hash: md5
      md5: ba69f02e032ecb767866174c09bf8515.dir
      size: 48280766
      nfiles: 14034
  train:
    cmd: poetry run train --dataset-path data/prepared/train -o model.pkl
    deps:
    - path: data/prepared/train/
      hash: md5
      md5: ba69f02e032ecb767866174c09bf8515.dir
      size: 48280766
      nfiles: 14034
    - path: intel_image_classification/train.py
      hash: md5
      md5: 08b4da2b0cf3b5d319d15c0d2636ff19
      size: 3964
    params:
      params.yaml:
        train:
          batch_size: 2
          validation_split: 0.2
          epochs: 20
    outs:
    - path: model.pkl
      hash: md5
      md5: 773ea4204c18f2bf69397ef5a2c6d281
      size: 20837690
  evaluate:
    cmd: poetry run evaluate --model-path model.pkl
    deps:
    - path: data/prepared/test
      hash: md5
      md5: de1844a58ad4f556eda23a2b858ab681.dir
      size: 10299352
      nfiles: 3000
    - path: intel_image_classification/evaluate.py
      hash: md5
      md5: 90eaac68d93374c072354c8f41cb3fc9
      size: 884
    - path: model.pkl
      hash: md5
      md5: 773ea4204c18f2bf69397ef5a2c6d281
      size: 20837690
