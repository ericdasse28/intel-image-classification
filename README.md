# Intel image classification

Training of a model to automatically recognize natural scenes around the world

## Getting started

1. Clone or fork this repository
2. Install [Poetry](https://python-poetry.org/docs/) (if it's not already installed in your system)
3. Go to the repository location on your system and create a virtual environment: `python -m venv .venv`
4. Install the project dependencies: `poetry install`
5. Activate the virtual environment: `poetry shell`

## Data versioning steps

1. Download [Intel image classification dataset](https://www.kaggle.com/datasets/puneet6060/intel-image-classification/data) from Kaggle
2. Unzip the archive you just downloaded. You should obtain 3 folders: `seg_train`, `seg_test` and `seg_pred`. Now you can delete the archive
3. At the root of the repository, create a folder named `data`, then a folder named `raw` inside the `data` folder: `mkdir -p data/raw`
4. Move the Intel image classification datasets to the repository raw data folder:

```bash
mv seg_train data/raw/
mv seg_test data/raw/
mv seg_pred data/raw
```

5. Add DVC to python dependencies

```bash
poetry add dvc
git add pyproject.toml poetry.lock
git commit -m "Deps: add DVC"
```

6. Initialize DVC repository

```bash
dvc init
git add .dvc .dvcignore
git commit -m "Initialize DVC repository"
```

7. Track the datasets with DVC (these commands might take several seconds the first time)

```bash
dvc add data/raw/seg_train
dvc add data/raw/seg_test
dvc add data/raw/seg_pred
```

These commands will add the datasets to DVC cache and create the following small files:

- `data/raw/.gitignore`
- `data/raw/seg_train.dvc`
- `data/raw/seg_test.dvc`
- `data/raw/seg_pred.dvc`

8. Version the small files generated by DVC using Git:

```bash
git add .
git commit -m "Add DVC files"
```

---

**Note**
There is also a `dvc commit` command but it does not do the same thing as `git commit`. In fact, you need `dvc commit` only when a file already tracked by DVC changes. If you make local changes to the data, then you would commit the change to the cache before uploading it to remote. At this point, you havent't changed your data since it was added so you can skip the commit step.

The reason is DVC doesn't need a snapshot of the whole repository. It can just upload individual files as soon they are tracked with `dvc add`.

---

10. Upload large files to DVC remote

- [Add a DVC remote](https://dvc.org/doc/command-reference/remote/add). You can use your local computer or [Google Drive as a remote](https://dvc.org/doc/user-guide/data-management/remote-storage/google-drive) if you don't have access to a cloud provider or a distant machine (via SSH or HTTP). See [here](https://dvc.org/doc/user-guide/data-management/remote-storage#supported-storage-types) for a list of possible DVC storage types
- Push datasets to remote: `dvc push`
